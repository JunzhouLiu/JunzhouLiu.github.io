<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NYOJ-055初识C++STL之priority_queue | JunzhouLiu</title>
    <meta name="description" content="Happy Coding">
    
    
    <link rel="preload" href="/assets/css/0.styles.a46dcfd8.css" as="style"><link rel="preload" href="/assets/js/app.d39432b0.js" as="script"><link rel="preload" href="/assets/js/6.35f30039.js" as="script"><link rel="preload" href="/assets/js/13.3ecd2616.js" as="script"><link rel="prefetch" href="/assets/js/1.5cc123c1.js"><link rel="prefetch" href="/assets/js/10.926e81f3.js"><link rel="prefetch" href="/assets/js/11.97f13b1a.js"><link rel="prefetch" href="/assets/js/12.5d117340.js"><link rel="prefetch" href="/assets/js/14.53fc963d.js"><link rel="prefetch" href="/assets/js/15.754b7a67.js"><link rel="prefetch" href="/assets/js/16.c6d5cd73.js"><link rel="prefetch" href="/assets/js/17.4ea439f8.js"><link rel="prefetch" href="/assets/js/18.7d88d3cb.js"><link rel="prefetch" href="/assets/js/19.774c19d8.js"><link rel="prefetch" href="/assets/js/20.9d20ed18.js"><link rel="prefetch" href="/assets/js/21.ab06b816.js"><link rel="prefetch" href="/assets/js/22.7994ae3f.js"><link rel="prefetch" href="/assets/js/23.19608dac.js"><link rel="prefetch" href="/assets/js/24.3d32a73c.js"><link rel="prefetch" href="/assets/js/25.0170e015.js"><link rel="prefetch" href="/assets/js/3.80214660.js"><link rel="prefetch" href="/assets/js/4.e6411a27.js"><link rel="prefetch" href="/assets/js/5.266b978f.js"><link rel="prefetch" href="/assets/js/7.1aa5a4ce.js"><link rel="prefetch" href="/assets/js/8.658cca8b.js"><link rel="prefetch" href="/assets/js/9.57a66d49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a46dcfd8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-0539f1bd><div data-v-39c72c19 data-v-0539f1bd><nav class="navbar" data-v-39c72c19><div class="container" data-v-39c72c19><a href="/" class="router-link-active" data-v-39c72c19><span class="navbar-site-name" data-v-39c72c19>
          JunzhouLiu
        </span></a> <div class="navbar-toggler" data-v-39c72c19><svg class="icon" style="font-size:1.2em;" data-v-39c72c19 data-v-39c72c19><title data-v-39c72c19 data-v-39c72c19>menu</title><use xlink:href="#icon-menu" data-v-39c72c19 data-v-39c72c19></use></svg></div> <div class="navbar-links" data-v-39c72c19><a href="/" class="navbar-link" data-v-39c72c19>
            首页
          </a><a href="/posts/" class="navbar-link" data-v-39c72c19>
            文章
          </a><a href="/about/" class="navbar-link" data-v-39c72c19>
            关于
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-39c72c19></div></div> <div class="banner" data-v-98d6aa8c data-v-0539f1bd data-v-0539f1bd><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-0539f1bd>
          NYOJ-055初识C++STL之priority_queue
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-6cd81e6a data-v-6cd81e6a><main class="main" data-v-6cd81e6a><div class="post" data-v-6cd81e6a data-v-6cd81e6a><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2018-05-29
    </span> <span class="update-date" data-v-4e23451f>
      最后修改 : 2019-06-17
    </span></section> <section class="post-links" data-v-4e23451f><!----> <a href="/gitalk-error/" class="post-link" data-v-4e23451f>
      下一篇 : 【已解决】Hexo NexT使用Gitalk未找到相关的Issues进行评论Error:Validation Failed
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><h1 id="碎语"><a href="#碎语" aria-hidden="true" class="header-anchor">#</a> 碎语</h1> <p>其实这道题是典型的<code>Huffman Tree</code>,最开始做的时候是用数组来实现队列的<code>FIFO</code>特性，但是提交后发现<code>O(N)</code>太高了，OJ总是报<code>TLE</code>,尝试优化未果之后，骆老师说堆排序试试，用<code>priority_queue</code>优先队列完美AC，堆排序的时间复杂度我们一般认为可以近似到<code>O(nlogn)</code>。emmm，不说废话了，开始讲正题。
</p> <h1 id="关于priority-queue"><a href="#关于priority-queue" aria-hidden="true" class="header-anchor">#</a> 关于<code>priority_queue</code></h1> <p><code>priority_queue</code>在<code>#include &lt;queue&gt;</code>中，我们用之前先声明一下，值得提的是优先队列在使用的过程中是会自动排序的，这一点尤为重要。</p> <div class="language-C++ extra-class"><pre class="language-text"><code>priority_queue &lt;int&gt; i;
priority_queue &lt;double&gt; d;
priority_queue &lt;node&gt; q;//结构体
priority_queue &lt;int,vector&lt;int&gt;,greater&lt;int&gt; &gt; q;//greater升序
//#include&lt;vector&gt;可以省略
priority_queue &lt;int,vector&lt;int&gt;,less&lt;int&gt; &gt;q;//less降序
</code></pre></div><p>我们先声明一个名为<code>q</code>的<code>priority_queue</code></p> <div class="language-C++ extra-class"><pre class="language-text"><code>priority_queue&lt;int,vector&lt;int&gt;,greater&lt;int&gt; &gt;q;//缺省升序
</code></pre></div><p>则可以对其进行以下操作</p> <div class="language-C++ extra-class"><pre class="language-text"><code>q.size();//返回队列q元素个数
q.empty();//确定队列q是否为空，空则return 1，反之 return 0
q.push(k);//在队列q的末尾插入（压入）元素k
q.pop();//弹掉队列q的第一个元素
q.top();//取出队列q的第一个元素
q.back();//取出队列q的末尾元素
</code></pre></div><h1 id="题目描述"><a href="#题目描述" aria-hidden="true" class="header-anchor">#</a> 题目描述:</h1> <p>小明很想吃果子，正好果园果子熟了。在果园里，小明已经将所有的果子打了下来，而且按果子的不同种类分成了不同的堆。小明决定把所有的果子合成一堆。 因为小明比较懒，为了省力气，小明开始想点子了:
　　每一次合并，小明可以把两堆果子合并到一起，消耗的体力等于两堆果子的重量之和。可以看出，所有的果子经过n-1次合并之后，就只剩下一堆了。小明在合并果子时总共消耗的体力等于每次合并所耗体力之和。
　　因为还要花大力气把这些果子搬回家，所以小明在合并果子时要尽可能地节省体力。假定每个果子重量都为1，并且已知果子的种类数和每种果子的数目，你的任务是设计出合并的次序方案，使小明耗费的体力最少，并输出这个最小的体力耗费值。
　　例如有3种果子，数目依次为1，2，9。可以先将1、2堆合并，新堆数目为3，耗费体力为3。接着，将新堆与原先的第三堆合并，又得到新的堆，数目为12，耗费体力为12。所以小明总共耗费体力=3+12=15。可以证明15为最小的体力耗费值。
<strong>输入描述:</strong>
第一行输入整数N(0&lt; N&lt; =10)表示测试数据组数。接下来每组测试数据输入包括两行，第一行是一个整数n(1&lt;＝n&lt;=12000)，表示果子的种类数。第二行包含n个整数，用空格分隔，第i个整数ai(1&lt;＝ai&lt;=20000)是第i种果子的数目。
<strong>输出描述:</strong>
每组测试数据输出包括一行，这一行只包含一个整数，也就是最小的体力耗费值。
<strong>样例输入:</strong></p> <blockquote><p>1
3
1  2 9</p></blockquote> <p><strong>样例输出:</strong></p> <blockquote><p>15</p></blockquote> <h1 id="使用数组模拟实现"><a href="#使用数组模拟实现" aria-hidden="true" class="header-anchor">#</a> 使用数组模拟实现</h1> <div class="language-C++ extra-class"><pre class="language-text"><code>/*time：3828ms memory：2024k*/
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;string.h&gt;

using namespace std;

long long test(int queue[],int x) {
    long long power=0;
    int beg=1;
    for(int i=1; i&lt;x; i++) {
        power+=queue[i]+queue[i-1];//最小的两个值相加
        queue[i]+=queue[i-1];//更新[i]值，
        queue[i-1]=0;//[i-1]置0；
        sort(queue+beg,queue+x);//重新排序
        beg++;
    }
    return power;
}

int main() {
    int n;
    int queue[12010];
	cin&gt;&gt;n;
    while(n--) {
        int _num;
        cin&gt;&gt;_num;
        for(int i=0; i&lt;_num; i++) {
            cin&gt;&gt;queue[i];
        }
        sort(queue,queue+_num);//排序
        cout&lt;&lt;test(queue,_num)&lt;&lt;endl;
    }
    return 0;
}
</code></pre></div><h1 id="使用priority-queue实现"><a href="#使用priority-queue实现" aria-hidden="true" class="header-anchor">#</a> 使用<code>priority_queue</code>实现</h1> <div class="language-C++ extra-class"><pre class="language-text"><code>/*time：122ms memory：2168k*/
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;string.h&gt;
#include &lt;queue&gt;

using namespace std;

int main() {
	int n;
	cin&gt;&gt;n;
	while(n--) {
		int _num,a,b;
		long long power=0;
		priority_queue&lt;int,vector&lt;int&gt;,greater&lt;int&gt; &gt;q;//定义priority_queue
		cin&gt;&gt;_num;
		for(int i=0; i&lt;_num; i++) {
			int temp;
			cin&gt;&gt;temp;
			q.push(temp);//数据插入queue
		}
		if(q.size()==1) {
			cout&lt;&lt;power&lt;&lt;endl;
			break;//特殊值处理，为1时无需搬运
		}
		while(!q.empty()) {
			a=q.top();//取出最小值
			q.pop();//弹出该值
			b=q.top();//取出队列最小值
			q.pop();//弹出该值
			power+=(a+b);//计入体力
			if(!q.empty()) {
				q.push(a+b);
				//队列非空时压入队列 ，重新排序
			}
		}
		cout&lt;&lt;power&lt;&lt;endl;
	}
	return 0;
}
</code></pre></div></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2018-05-29
    </span> <span class="update-date" data-v-4e23451f>
      最后修改 : 2019-06-17
    </span></section> <section class="post-links" data-v-4e23451f><!----> <a href="/gitalk-error/" class="post-link" data-v-4e23451f>
      下一篇 : 【已解决】Hexo NexT使用Gitalk未找到相关的Issues进行评论Error:Validation Failed
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-6cd81e6a><div class="info-card main-div" data-v-3da8ff8d data-v-6cd81e6a><div class="info-card-header" data-v-3da8ff8d><img src="/assets/img/avatar.jpg" alt="Junzhou" class="info-avatar" data-v-3da8ff8d></div> <div class="info-card-body" data-v-3da8ff8d><section class="info-nickname" data-v-3da8ff8d>
      Junzhou
    </section> <section class="info-desc" data-v-3da8ff8d>Happy Coding<br/>Happy Life</section> <section class="info-contact" data-v-3da8ff8d><section data-v-3da8ff8d><span title="XinYang City, China" data-v-3da8ff8d data-v-3da8ff8d><svg class="icon" style="font-size:1em;" data-v-3da8ff8d data-v-3da8ff8d><title data-v-3da8ff8d data-v-3da8ff8d>XinYang City, China</title><use xlink:href="#icon-location" data-v-3da8ff8d data-v-3da8ff8d></use></svg><span class="info-text" data-v-3da8ff8d data-v-3da8ff8d>
          XinYang City, China
        </span></span></section> <!----> <section data-v-3da8ff8d><a href="mailto:Junzhou2016@outlook.com" title="Junzhou2016@outlook.com" data-v-3da8ff8d data-v-3da8ff8d><svg class="icon" style="font-size:1em;" data-v-3da8ff8d data-v-3da8ff8d><title data-v-3da8ff8d data-v-3da8ff8d>Junzhou2016@outlook.com</title><use xlink:href="#icon-email" data-v-3da8ff8d data-v-3da8ff8d></use></svg><span class="info-text" data-v-3da8ff8d data-v-3da8ff8d>
          Junzhou2016@outlook.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-3da8ff8d><section class="info-sns clearfix" data-v-3da8ff8d><a href="https://github.com/JunzhouLiu" target="_blank" class="sns-link" data-v-3da8ff8d><span title="GitHub: JunzhouLiu" class="sns-icon" data-v-3da8ff8d data-v-3da8ff8d><svg class="icon" style="font-size:1.5em;" data-v-3da8ff8d data-v-3da8ff8d><title data-v-3da8ff8d data-v-3da8ff8d>GitHub: JunzhouLiu</title><use xlink:href="#icon-github" data-v-3da8ff8d data-v-3da8ff8d></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-6cd81e6a><!----> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/nyoj055/#post-comments">
      评论
    </a></div></div></aside></div> <footer class="footer" data-v-1114308c><p class="sns-links" data-v-1114308c><a href="https://github.com/JunzhouLiu" target="_blank" class="sns-link" data-v-1114308c><span title="GitHub: JunzhouLiu" class="sns-icon" data-v-1114308c data-v-1114308c><svg class="icon" style="font-size:25px;" data-v-1114308c data-v-1114308c><title data-v-1114308c data-v-1114308c>GitHub: JunzhouLiu</title><use xlink:href="#icon-github" data-v-1114308c data-v-1114308c></use></svg></span></a></p> <p data-v-1114308c><span data-v-1114308c>Powered by </span> <a href="https://vuepress.vuejs.org" target="_blank" data-v-1114308c>
      Vuepress
    </a></p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.d39432b0.js" defer></script><script src="/assets/js/6.35f30039.js" defer></script><script src="/assets/js/13.3ecd2616.js" defer></script>
  </body>
</html>
